# üó∫Ô∏è –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø GOOGLE MAPS API

## üéØ –ß–û–ú–£ –¶–ï –ü–û–¢–†–Ü–ë–ù–û:

Google Maps API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è:
- ‚úÖ **–†–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ä–µ–∞–ª—å–Ω–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ** –º—ñ–∂ —Ç–æ—á–∫–∞–º–∏ (Distance Matrix API)
- ‚úÖ **–ì–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å** –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (Geocoding API)
- ‚úÖ **–¢–æ—á–Ω–æ–≥–æ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ** (–≥—Ä–Ω/–∫–º + –≥—Ä–Ω/—Ö–≤)

**–ë–µ–∑ API:**
- ‚ùå –í—ñ–¥—Å—Ç–∞–Ω—å = 5 –∫–º (–∑–∞–≥–ª—É—à–∫–∞)
- ‚ùå –í–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞–≤–∂–¥–∏ ~200 –≥—Ä–Ω
- ‚ùå –¢–µ–∫—Å—Ç–æ–≤—ñ –∞–¥—Ä–µ—Å–∏ –Ω–µ –≥–µ–æ–∫–æ–¥—É—é—Ç—å—Å—è

**–ó API:**
- ‚úÖ –†–µ–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å (–ö—Ä–∏–≤–∏–π –†—ñ–≥ ‚Üí –ö–∏—ó–≤ = 450 –∫–º)
- ‚úÖ –¢–æ—á–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å (~1500-2000 –≥—Ä–Ω –∑–∞ 450 –∫–º)
- ‚úÖ –ê–¥—Ä–µ—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏

---

## üí∞ –¶–Ü–ù–ê:

Google Maps Platform **–ë–ï–ó–ö–û–®–¢–û–í–ù–û:**
- $200 credit —â–æ–º—ñ—Å—è—Ü—è
- Distance Matrix: $5 –∑–∞ 1000 –∑–∞–ø–∏—Ç—ñ–≤
- **–ù–∞ $200 –≤–∏—Å—Ç–∞—á–∏—Ç—å:** ~40,000 –∑–∞–º–æ–≤–ª–µ–Ω—å/–º—ñ—Å—è—Ü—å
- **–î–ª—è –º–∞–ª–æ–≥–æ —Ç–∞–∫—Å—ñ:** –¶—ñ–ª–∫–æ–º –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ!

---

## üìã –ü–û–ö–†–û–ö–û–í–ê –Ü–ù–°–¢–†–£–ö–¶–Ü–Ø:

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://console.cloud.google.com
2. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Google –∞–∫–∞—É–Ω—Ç
3. **Create Project** ‚Üí –ù–∞–∑–≤–∞: "Taxi Bot"
4. **Select Project** (–æ–±–µ—Ä—ñ—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –ø—Ä–æ—î–∫—Ç)

---

### –ö—Ä–æ–∫ 2: –í–∫–ª—é—á–µ–Ω–Ω—è API

1. **Navigation Menu** (‚ò∞) ‚Üí **APIs & Services** ‚Üí **Library**
2. –ó–Ω–∞–π–¥—ñ—Ç—å —ñ **Enable** –Ω–∞—Å—Ç—É–ø–Ω—ñ API:
   - ‚úÖ **Distance Matrix API**
   - ‚úÖ **Geocoding API**
   - ‚úÖ **Maps Static API** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–∞—Ä—Ç)

---

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è API Key

1. **Navigation Menu** ‚Üí **APIs & Services** ‚Üí **Credentials**
2. **Create Credentials** ‚Üí **API Key**
3. **–°–∫–æ–ø—ñ—é–π—Ç–µ –∫–ª—é—á** (–≤–∏–≥–ª—è–¥–∞—î —è–∫: `AIzaSyD...`)

---

### –ö—Ä–æ–∫ 4: –û–±–º–µ–∂–µ–Ω–Ω—è –∫–ª—é—á–∞ (–±–µ–∑–ø–µ–∫–∞) ‚ö†Ô∏è

**–í–ê–ñ–õ–ò–í–û:** –ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å –≤–∞—à –∫–ª—é—á –º–æ–∂–µ –±—É—Ç–∏ –≤–∫—Ä–∞–¥–µ–Ω–∏–π!

1. –ó–Ω–∞–π–¥—ñ—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π API Key ‚Üí **Edit**
2. **Application restrictions:**
   - –û–±–µ—Ä—ñ—Ç—å **IP addresses**
   - –î–æ–¥–∞–π—Ç–µ IP –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Render (–∑–Ω–∞–π–¥—ñ—Ç—å –≤ Render Dashboard)
   - –ê–±–æ –æ–±–µ—Ä—ñ—Ç—å **None** (—Ä–∏–∑–∏–∫–æ–≤–∞–Ω–æ, —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤!)
3. **API restrictions:**
   - –û–±–µ—Ä—ñ—Ç—å **Restrict key**
   - –î–æ–¥–∞–π—Ç–µ:
     - Distance Matrix API
     - Geocoding API
     - Maps Static API
4. **Save**

---

### –ö—Ä–æ–∫ 5: –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤ Render

**Render Dashboard:**

1. –í–∞—à —Å–µ—Ä–≤—ñ—Å ‚Üí **Environment**
2. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—É –∑–º—ñ–Ω–Ω—É:
   ```
   Key: GOOGLE_MAPS_API_KEY
   Value: AIzaSyD... (–≤–∞—à –∫–ª—é—á)
   ```
3. **Save Changes**
4. –°–µ—Ä–≤—ñ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è

---

### –ö—Ä–æ–∫ 6: –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–§–∞–π–ª `.env`:**
```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
ADMIN_IDS=–≤–∞—à_id
GOOGLE_MAPS_API_KEY=AIzaSyD...
DRIVER_GROUP_CHAT_ID=-1001234567890
PAYMENT_CARD_NUMBER=1234567890123456
```

**–¢–µ—Å—Ç:**
```bash
python -m app.main
```

**–°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:**
- –ó–≤—ñ–¥–∫–∏: –ö—Ä–∏–≤–∏–π –†—ñ–≥, –≤—É–ª. –°–æ–±–æ—Ä–Ω–æ—Å—Ç—ñ 1
- –ö—É–¥–∏: –ö–∏—ó–≤, –•—Ä–µ—â–∞—Ç–∏–∫ 1
- –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏: `üìè –í—ñ–¥—Å—Ç–∞–Ω—å: 450 –∫–º (~5 –≥–æ–¥)`
- –í–∞—Ä—Ç—ñ—Å—Ç—å: ~1500-2000 –≥—Ä–Ω

---

## üéØ –ü–†–ò–ö–õ–ê–î –†–û–ë–û–¢–ò:

### –ë–ï–ó Google Maps API:
```
üìã –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

üë§ –ö–ª—ñ—î–Ω—Ç: –Ü–≤–∞–Ω
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +380123456789
üèô –ú—ñ—Å—Ç–æ: –ö—Ä–∏–≤–∏–π –†—ñ–≥

üìç –ó–≤—ñ–¥–∫–∏: –ö—Ä–∏–≤–∏–π –†—ñ–≥, –≤—É–ª. –°–æ–±–æ—Ä–Ω–æ—Å—Ç—ñ 1
üìç –ö—É–¥–∏: –ö–∏—ó–≤, –•—Ä–µ—â–∞—Ç–∏–∫ 1
üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä: ‚Äî

–í—Å–µ –≤—ñ—Ä–Ω–æ?
```

### –ó Google Maps API:
```
üìã –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

üë§ –ö–ª—ñ—î–Ω—Ç: –Ü–≤–∞–Ω
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +380123456789
üèô –ú—ñ—Å—Ç–æ: –ö—Ä–∏–≤–∏–π –†—ñ–≥

üìç –ó–≤—ñ–¥–∫–∏: –ö—Ä–∏–≤–∏–π –†—ñ–≥, –≤—É–ª. –°–æ–±–æ—Ä–Ω–æ—Å—Ç—ñ 1
üìç –ö—É–¥–∏: –ö–∏—ó–≤, –•—Ä–µ—â–∞—Ç–∏–∫ 1
üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä: ‚Äî

üìè –í—ñ–¥—Å—Ç–∞–Ω—å: 450.3 –∫–º (~320 —Ö–≤)
üí∞ –û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: 1850 –≥—Ä–Ω

–í—Å–µ –≤—ñ—Ä–Ω–æ?
```

---

## üîß –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –¢–ê–†–ò–§–Ü–í:

–¢–∞—Ä–∏—Ñ–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î. –°—Ç–≤–æ—Ä—ñ—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å:

```
/admin ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞—Ä–∏—Ñ:

–ë–∞–∑–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: 50 –≥—Ä–Ω
–ó–∞ –∫—ñ–ª–æ–º–µ—Ç—Ä: 10 –≥—Ä–Ω/–∫–º
–ó–∞ —Ö–≤–∏–ª–∏–Ω—É: 2 –≥—Ä–Ω/—Ö–≤
–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: 100 –≥—Ä–Ω
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:**
```
–ö—Ä–∏–≤–∏–π –†—ñ–≥ ‚Üí –ö–∏—ó–≤:
- –í—ñ–¥—Å—Ç–∞–Ω—å: 450 –∫–º
- –ß–∞—Å: 320 —Ö–≤

–í–∞—Ä—Ç—ñ—Å—Ç—å = max(
    –ú—ñ–Ω—ñ–º—É–º (100),
    –ë–∞–∑–æ–≤–∞ (50) + (450 –∫–º √ó 10 –≥—Ä–Ω/–∫–º) + (320 —Ö–≤ √ó 2 –≥—Ä–Ω/—Ö–≤)
)

= max(100, 50 + 4500 + 640)
= 5190 –≥—Ä–Ω
```

---

## ‚ö†Ô∏è –ë–ï–ó API (FALLBACK):

–Ø–∫—â–æ Google Maps API –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π:

1. ‚úÖ –ë–æ—Ç –ø—Ä–∞—Ü—é—î
2. ‚ùå –í—ñ–¥—Å—Ç–∞–Ω—å = 5 –∫–º (–∑–∞–≥–ª—É—à–∫–∞)
3. ‚ùå –í–∞—Ä—Ç—ñ—Å—Ç—å ~200 –≥—Ä–Ω
4. ‚ö†Ô∏è –¢–µ–∫—Å—Ç–æ–≤—ñ –∞–¥—Ä–µ—Å–∏ –Ω–µ –≥–µ–æ–∫–æ–¥—É—é—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ù–∞–ª–∞—à—Ç—É–π—Ç–µ API –¥–ª—è —Ç–æ—á–Ω–∏—Ö —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤!

---

## üÜò TROUBLESHOOTING:

### –ü–æ–º–∏–ª–∫–∞: "API key not found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –∫–ª—é—á –¥–æ–¥–∞–Ω–æ –≤ Render Environment
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å

### –ü–æ–º–∏–ª–∫–∞: "Request denied"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ Distance Matrix API –≤–∫–ª—é—á–µ–Ω–æ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –∫–ª—é—á–∞ (IP, API restrictions)

### –í—ñ–¥—Å—Ç–∞–Ω—å –Ω–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `–ì–µ–æ–∫–æ–¥–æ–≤–∞–Ω–æ –∞–¥—Ä–µ—Å—É: ...`
- –Ø–∫—â–æ "–ù–µ –≤–¥–∞–ª–æ—Å—è –≥–µ–æ–∫–æ–¥—É–≤–∞—Ç–∏" ‚Üí –∞–¥—Ä–µ—Å–∞ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—é –∑–∞–º—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É

### –í–µ–ª–∏–∫–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–∞—Ä–∏—Ñ–∏ –≤ –ë–î
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ: 10 –≥—Ä–Ω/–∫–º + 2 –≥—Ä–Ω/—Ö–≤
- –î–ª—è –º—ñ–∂–º—ñ—Å—å–∫–∏—Ö: –º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏ –≥—Ä–Ω/—Ö–≤

---

## üìä –ú–û–ù–Ü–¢–û–†–ò–ù–ì –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø:

**Google Cloud Console:**
1. **Navigation Menu** ‚Üí **APIs & Services** ‚Üí **Dashboard**
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –≥—Ä–∞—Ñ—ñ–∫–∏:
   - Distance Matrix API requests
   - Geocoding API requests
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∏—Ç—Ä–∞—Ç–∏ –≤ **Billing**

**–¢–∏–ø–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- 100 –∑–∞–º–æ–≤–ª–µ–Ω—å/–¥–µ–Ω—å = ~200 API calls/day
- ~6000 calls/month
- ~$30/month –∑ $200 credit
- **= –ë–ï–ó–ö–û–®–¢–û–í–ù–û**

---

## ‚úÖ –ü–Ü–î–°–£–ú–û–ö:

1. ‚úÖ –°—Ç–≤–æ—Ä—ñ—Ç—å Google Cloud Project
2. ‚úÖ –í–∫–ª—é—á—ñ—Ç—å Distance Matrix + Geocoding API
3. ‚úÖ –°—Ç–≤–æ—Ä—ñ—Ç—å API Key
4. ‚úÖ –û–±–º–µ–∂—Ç–µ –∫–ª—é—á (IP + API restrictions)
5. ‚úÖ –î–æ–¥–∞–π—Ç–µ –≤ Render Environment Variables
6. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å
7. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

**–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –±–æ—Ç –±—É–¥–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –†–ï–ê–õ–¨–ù–£ –≤—ñ–¥—Å—Ç–∞–Ω—å —ñ –≤–∞—Ä—Ç—ñ—Å—Ç—å!** üéâ
