# Інструкції по налаштуванню нових змінних

## Нові змінні середовища

Після останнього оновлення додано 2 нові опціональні змінні для покращення роботи бота:

### 1. DRIVER_GROUP_INVITE_LINK
**Призначення:** Посилання на групу водіїв, яке отримує водій після підтвердження заявки адміном.

**Як створити посилання:**
1. Відкрийте вашу групу водіїв в Telegram
2. Натисніть на назву групи → "Invite Links"
3. Створіть нове посилання (можна зробити одноразове або постійне)
4. Скопіюйте посилання (формат: `https://t.me/+абвгд12345`)

**Налаштування на Render:**
1. Render Dashboard → ваш сервіс
2. Environment → Add Environment Variable
3. Key: `DRIVER_GROUP_INVITE_LINK`
4. Value: `https://t.me/+ваше_посилання`
5. Save Changes

**Налаштування локально (.env):**
```env
DRIVER_GROUP_INVITE_LINK=https://t.me/+ваше_посилання
```

**Що це дає:**
- Після підтвердження заявки водій отримує повідомлення з прямим посиланням на групу
- Водій може одразу приєднатися без додаткових кроків
- Зменшується навантаження на адміна (не потрібно надсилати посилання вручну)

---

### 2. ADMIN_USERNAME
**Призначення:** Username адміністратора для контактів підтримки.

**Налаштування на Render:**
1. Render Dashboard → ваш сервіс
2. Environment → Add Environment Variable
3. Key: `ADMIN_USERNAME`
4. Value: `ваш_username` (БЕЗ символу @)
5. Save Changes

**Налаштування локально (.env):**
```env
ADMIN_USERNAME=ваш_username
```

**Приклад:**
Якщо ваш Telegram username `@support_taxi`, то вказуйте: `support_taxi`

**Що це дає:**
- В повідомленнях допомоги з'являється клікабельне посилання на адміна
- Користувачі та водії можуть легко зв'язатися з підтримкою
- Замість "Напишіть адміністратору" буде "@ваш_username"

---

## Інші зміни

### Динамічна комісія
Тепер в повідомленнях допомоги показується **актуальна комісія** з бази даних, а не хардкоджена 2%.
- Комісія береться з останнього тарифу (поле `commission_percent`)
- Якщо адмін змінить комісію через панель адміна, користувачі будуть бачити актуальну інформацію

---

## Повний приклад .env файлу

```env
# Обов'язкові
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789

# Опціональні (рекомендовані)
DRIVER_GROUP_CHAT_ID=-1001234567890
DRIVER_GROUP_INVITE_LINK=https://t.me/+xyz123abc
ADMIN_USERNAME=admin_taxi

# Інші опціональні
GOOGLE_MAPS_API_KEY=your_google_maps_key
PAYMENT_CARD_NUMBER=4149 4999 0123 4567
DB_PATH=data/taxi.sqlite3
```

---

## Що буде якщо не вказати ці змінні?

Якщо ви не вкажете ці змінні, бот **продовжить працювати** без проблем:
- Без `DRIVER_GROUP_INVITE_LINK`: водій просто не отримає посилання (як було раніше)
- Без `ADMIN_USERNAME`: буде відображатись "Напишіть адміністратору" (як було раніше)

**Але рекомендується** їх налаштувати для покращення UX!

---

## Після змін

Після додавання змінних на Render:
1. Render автоматично перезапустить бота
2. Нові налаштування почнуть діяти одразу
3. Перевірте роботу бота командою /start

---

**Дата оновлення:** 2025-10-18
**Версія:** 2.0
