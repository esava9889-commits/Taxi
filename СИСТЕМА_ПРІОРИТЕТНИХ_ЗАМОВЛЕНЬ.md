# üåü –°–ò–°–¢–ï–ú–ê –ü–†–Ü–û–†–ò–¢–ï–¢–ù–ò–• –ó–ê–ú–û–í–õ–ï–ù–¨

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 2025-10-23  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

---

## üìã –ó–ú–Ü–°–¢

1. [–û–ø–∏—Å —Å–∏—Å—Ç–µ–º–∏](#–æ–ø–∏—Å-—Å–∏—Å—Ç–µ–º–∏)
2. [–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î](#—è–∫-—Ü–µ-–ø—Ä–∞—Ü—é—î)
3. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
4. [–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è](#—Ç–µ—Ö–Ω—ñ—á–Ω–∞-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è)
5. [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

---

## üéØ –û–ü–ò–° –°–ò–°–¢–ï–ú–ò

–°–∏—Å—Ç–µ–º–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å –¥–æ–∑–≤–æ–ª—è—î –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –≤–æ–¥—ñ—ó–≤, —è–∫—ñ –æ—Ç—Ä–∏–º—É—é—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è **–ø–µ—Ä—à–∏–º–∏** —á–µ—Ä–µ–∑ –æ—Å–æ–±–∏—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–î–ú) –∑–∞–º—ñ—Å—Ç—å –∑–∞–≥–∞–ª—å–Ω–æ—ó –≥—Ä—É–ø–∏.

### –ü–µ—Ä–µ–≤–∞–≥–∏:
- ‚≠ê –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó –æ—Ç—Ä–∏–º—É—é—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ 1 —Ö–≤–∏–ª–∏–Ω—É —Ä–∞–Ω—ñ—à–µ
- üöÄ –®–≤–∏–¥—à–µ –ø—Ä–∏–π–Ω—è—Ç—Ç—è –∑–∞–º–æ–≤–ª–µ–Ω—å —Ç–æ–ø–æ–≤–∏–º–∏ –≤–æ–¥—ñ—è–º–∏
- üíØ –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è
- üéØ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∂—É–≤–∞—Ç–∏ –∫—Ä–∞—â–∏—Ö –≤–æ–¥—ñ—ó–≤

---

## üîÑ –Ø–ö –¶–ï –ü–†–ê–¶–Æ–Ñ

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –í–æ–¥—ñ–π –ø—Ä–∏–π–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

```
1. –ö–ª—ñ—î–Ω—Ç —Å—Ç–≤–æ—Ä—é—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
   ‚Üì
2. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ —î –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó
   ‚Üì
3. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –¢–Ü–õ–¨–ö–ò –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –≤–æ–¥—ñ—è–º (–º–∞–∫—Å 5)
   —á–µ—Ä–µ–∑ –æ—Å–æ–±–∏—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
   ‚Üì
4. –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ç–∞–π–º–µ—Ä –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
   ‚Üì
5. –í–æ–¥—ñ–π –ø—Ä–∏–π–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚úÖ
   ‚Üì
6. –¢–∞–π–º–µ—Ä —Å–∫–∞—Å–æ–≤—É—î—Ç—å—Å—è
   ‚Üì
7. –Ü–Ω—à—ñ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –í–æ–¥—ñ–π –≤—ñ–¥—Ö–∏–ª—è—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

```
1-4. [–¢–∞–∫ —Å–∞–º–æ —è–∫ —É —Å—Ü–µ–Ω–∞—Ä—ñ—ó 1]
   ‚Üì
5. –í–æ–¥—ñ–π –≤—ñ–¥—Ö–∏–ª—è—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚ùå
   ‚Üì
6. –¢–∞–π–º–µ—Ä —Å–∫–∞—Å–æ–≤—É—î—Ç—å—Å—è
   ‚Üì
7. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –û–î–†–ê–ó–£ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –∑–∞–≥–∞–ª—å–Ω—ñ–π –≥—Ä—É–ø—ñ
   ‚Üì
8. –í—Å—ñ –≤–æ–¥—ñ—ó –º–æ–∂—É—Ç—å –π–æ–≥–æ –ø—Ä–∏–π–Ω—è—Ç–∏
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –¢–∞–π–º–∞—É—Ç (1 —Ö–≤–∏–ª–∏–Ω–∞)

```
1-4. [–¢–∞–∫ —Å–∞–º–æ —è–∫ —É —Å—Ü–µ–Ω–∞—Ä—ñ—ó 1]
   ‚Üì
5. –í–æ–¥—ñ—ó –Ω–µ —Ä–µ–∞–≥—É—é—Ç—å –ø—Ä–æ—Ç—è–≥–æ–º 60 —Å–µ–∫—É–Ω–¥ ‚è∞
   ‚Üì
6. –¢–∞–π–º–µ—Ä —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
   ‚Üì
7. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –∑–∞–≥–∞–ª—å–Ω—ñ–π –≥—Ä—É–ø—ñ
   ‚Üì
8. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "—á–∞—Å –º–∏–Ω—É–≤"
```

---

## ‚öôÔ∏è –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

#### 1. –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É

```
üöó –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω–∞ ‚Üí –í–æ–¥—ñ—ó ‚Üí [–¢—É–º–±–ª–µ—Ä] –£–≤—ñ–º–∫–Ω—É—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
```

**–í–∞–∂–ª–∏–≤–æ:** –Ø–∫—â–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –í–ò–ú–ö–ù–ï–ù–û - –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –π–¥—É—Ç—å –≤ –∑–∞–≥–∞–ª—å–Ω—É –≥—Ä—É–ø—É –æ–¥—Ä–∞–∑—É.

#### 2. –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–æ–¥—ñ—è

```
üöó –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω–∞ ‚Üí –í–æ–¥—ñ—ó ‚Üí [–û–±—Ä–∞—Ç–∏ –≤–æ–¥—ñ—è] ‚Üí ‚≠ê –£–≤—ñ–º–∫–Ω—É—Ç–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
```

**–ü–æ–∑–Ω–∞—á–∫–∏:**
- ‚≠ê - –≤–æ–¥—ñ–π –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º
- üü¢ - –æ–Ω–ª–∞–π–Ω
- üî¥ - –æ—Ñ–ª–∞–π–Ω

#### 3. –ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤

–£ —Å–ø–∏—Å–∫—É –≤–æ–¥—ñ—ó–≤ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ –µ–º–æ–¥–∂—ñ ‚≠ê

---

## üõ† –¢–ï–•–ù–Ü–ß–ù–ê –†–ï–ê–õ–Ü–ó–ê–¶–Ü–Ø

### –§–∞–π–ª–∏ —Å–∏—Å—Ç–µ–º–∏:

#### 1. `app/utils/priority_order_manager.py` (–ù–û–í–ò–ô)
**–û—Å–Ω–æ–≤–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å**

–§—É–Ω–∫—Ü—ñ—ó:
- `send_to_priority_drivers()` - –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –≤–æ–¥—ñ—è–º
- `start_priority_timer()` - –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 1 —Ö–≤–∏–ª–∏–Ω—É
- `cancel_priority_timer()` - –°–∫–∞—Å—É–≤–∞–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞
- `_priority_timeout_handler()` - –û–±—Ä–æ–±–Ω–∏–∫ —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞
- `_send_to_group()` - –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—É –ø—ñ—Å–ª—è —Ç–∞–π–º–∞—É—Ç—É
- `_notify_priority_drivers_timeout()` - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–æ–¥—ñ—è–º –ø—Ä–æ —Ç–∞–π–º–∞—É—Ç

#### 2. `app/handlers/order.py` (–û–ù–û–í–õ–ï–ù–û)
**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø—Ä–æ—Ü–µ—Å–æ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å**

–ó–º—ñ–Ω–∏:
- –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤ –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –õ–æ–≥—ñ–∫–∞: —Å–ø–æ—á–∞—Ç–∫—É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ ‚Üí –ø–æ—Ç—ñ–º –≥—Ä—É–ø–∞
- –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å—ñ—Ö –¥–µ—Ç–∞–ª–µ–π –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ –º–µ–Ω–µ–¥–∂–µ—Ä

#### 3. `app/handlers/driver_panel.py` (–û–ù–û–í–õ–ï–ù–û)
**–°–∫–∞—Å—É–≤–∞–Ω–Ω—è —Ç–∞–π–º–µ—Ä—ñ–≤ –ø—Ä–∏ –¥—ñ—è—Ö –≤–æ–¥—ñ—è**

–ó–º—ñ–Ω–∏:
- –í `accept_order`: –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞
- –í `reject_order`: –°–∫–∞—Å—É–≤–∞–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞ + –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø—É

#### 4. `app/handlers/admin.py` (–ë–ï–ó –ó–ú–Ü–ù)
**–¢—É–º–±–ª–µ—Ä–∏ –≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ**

–§—É–Ω–∫—Ü—ñ—ó:
- `get_priority_mode()` - –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É
- `set_priority_mode()` - –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
- `priority_mode_toggle` - Callback –¥–ª—è —Ç—É–º–±–ª–µ—Ä–∞
- `admin_driver:priority_toggle:{id}` - –¢—É–º–±–ª–µ—Ä –¥–ª—è –≤–æ–¥—ñ—è

---

## üíæ –ë–ê–ó–ê –î–ê–ù–ò–•

### –ö–æ–ª–æ–Ω–∫–∞ `priority` –≤ —Ç–∞–±–ª–∏—Ü—ñ `drivers`

```sql
ALTER TABLE drivers ADD COLUMN priority INTEGER NOT NULL DEFAULT 0;
```

**–ó–Ω–∞—á–µ–Ω–Ω—è:**
- `0` - –ó–≤–∏—á–∞–π–Ω–∏–π –≤–æ–¥—ñ–π
- `1` - –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –≤–æ–¥—ñ–π

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ú—ñ–≥—Ä–∞—Ü—ñ—è –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–∞, –ø–æ–ª–µ —ñ—Å–Ω—É—î.

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –õ–æ–≥—É–≤–∞–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É—î –≤—Å—ñ –¥—ñ—ó:

```
‚≠ê –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #123: –∑–Ω–∞–π–¥–µ–Ω–æ 3 –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤
üì® –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ–º—É –≤–æ–¥—ñ—é –Ü–≤–∞–Ω (ID: 45)
‚è∞ –¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
‚úÖ –¢–∞–π–º–µ—Ä —Å–∫–∞—Å–æ–≤–∞–Ω–æ –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 (–ø—Ä–∏–π–Ω—è—Ç–æ –≤–æ–¥—ñ—î–º)
‚è∞ –¢–ê–ô–ú–ê–£–¢! –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 –Ω–µ –ø—Ä–∏–π–Ω—è—Ç–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º–∏ –≤–æ–¥—ñ—è–º–∏, –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø—É
üì¢ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –≥—Ä—É–ø—É 123456789
```

---

## üß™ –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### –¢–µ—Å—Ç 1: –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –≤–æ–¥—ñ–π –ø—Ä–∏–π–º–∞—î

```
‚úÖ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞:
1. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –≤–æ–¥—ñ—è
3. –í–æ–¥—ñ–π –º–∞—î –±—É—Ç–∏ –æ–Ω–ª–∞–π–Ω

‚úÖ –í–∏–∫–æ–Ω–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞
2. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –≤–æ–¥—ñ–π –æ—Ç—Ä–∏–º–∞—î –î–ú –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚úÖ –ü—Ä–∏–π–Ω—è—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è"

‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ
- –í –≥—Ä—É–ø—ñ –≤–æ–Ω–æ –ù–ï –∑'—è–≤–ª—è–ª–æ—Å—è
- –¢–∞–π–º–µ—Ä —Å–∫–∞—Å–æ–≤–∞–Ω–æ
```

### –¢–µ—Å—Ç 2: –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –≤–æ–¥—ñ–π –≤—ñ–¥—Ö–∏–ª—è—î

```
‚úÖ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞: [–¢–∞–∫ —Å–∞–º–æ]

‚úÖ –í–∏–∫–æ–Ω–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚ùå –ù–µ –º–æ–∂—É –≤–∑—è—Ç–∏"

‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∏–∫–ª–æ —É –≤–æ–¥—ñ—è
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –û–î–†–ê–ó–£ –∑'—è–≤–∏–ª–æ—Å—è –≤ –≥—Ä—É–ø—ñ
- –¢–∞–π–º–µ—Ä —Å–∫–∞—Å–æ–≤–∞–Ω–æ
```

### –¢–µ—Å—Ç 3: –¢–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥

```
‚úÖ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞: [–¢–∞–∫ —Å–∞–º–æ]

‚úÖ –í–∏–∫–æ–Ω–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
2. –ù–ï –Ω–∞—Ç–∏—Å–∫–∞–π—Ç–µ –∂–æ–¥–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫
3. –ß–µ–∫–∞–π—Ç–µ 60 —Å–µ–∫—É–Ω–¥

‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ß–µ—Ä–µ–∑ 60 —Å–µ–∫ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –≥—Ä—É–ø—ñ
- –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –≤–æ–¥—ñ–π –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "—á–∞—Å –º–∏–Ω—É–≤"
```

### –¢–µ—Å—Ç 4: –í–∏–º–∫–Ω–µ–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

```
‚úÖ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞:
1. –í–ò–ú–ö–ù–Ü–¢–¨ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

‚úÖ –í–∏–∫–æ–Ω–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –û–î–†–ê–ó–£ –π–¥–µ –≤ –≥—Ä—É–ø—É
- –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –≤–æ–¥—ñ—è–º –ù–ï –ø—Ä–∏—Ö–æ–¥–∏—Ç—å
```

---

## üìù –ü–û–í–Ü–î–û–ú–õ–ï–ù–ù–Ø

### –î–ª—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –≤–æ–¥—ñ—è:

```
‚≠ê –ü–†–Ü–û–†–ò–¢–ï–¢–ù–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø #123 ‚≠ê

–£ –≤–∞—Å —î 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω–Ω—è!

üë§ –ö–ª—ñ—î–Ω—Ç: –Ü–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +380501234567

üìç –ó–≤—ñ–¥–∫–∏: –≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 1
üìç –ö—É–¥–∏: –≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞, 10

üìè –í—ñ–¥—Å—Ç–∞–Ω—å: 5.2 –∫–º (~12 —Ö–≤)
üöó –ö–ª–∞—Å –∞–≤—Ç–æ: –ï–∫–æ–Ω–æ–º
üí∞ –í–ê–†–¢–Ü–°–¢–¨: 150 –≥—Ä–Ω üí∞

üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä: –ù–µ–º–∞—î

üó∫Ô∏è [–í—ñ–¥–∫—Ä–∏—Ç–∏ –º–∞—Ä—à—Ä—É—Ç –Ω–∞ Google Maps]

‚è∞ –Ø–∫—â–æ –≤–∏ –Ω–µ –ø—Ä–∏–π–º—ñ—Ç–µ –∞–±–æ –Ω–µ –≤—ñ–¥—Ö–∏–ª–∏—Ç–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ç—è–≥–æ–º 1 —Ö–≤–∏–ª–∏–Ω–∏,
–≤–æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑'—è–≤–∏—Ç—å—Å—è –≤ –∑–∞–≥–∞–ª—å–Ω—ñ–π –≥—Ä—É–ø—ñ.

[‚úÖ –ü—Ä–∏–π–Ω—è—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è] [‚ùå –ù–µ –º–æ–∂—É –≤–∑—è—Ç–∏]
```

### –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç—ñ:

```
‚è∞ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #123 –±—ñ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–µ (—á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –º–∏–Ω—É–≤)
```

---

## üîß –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –¢–ê–ô–ú–ï–†–ê

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ç–∞–π–º–µ—Ä = **60 —Å–µ–∫—É–Ω–¥** (1 —Ö–≤–∏–ª–∏–Ω–∞)

–î–ª—è –∑–º—ñ–Ω–∏ —Ç–∞–π–º–µ—Ä–∞ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `app/utils/priority_order_manager.py`:

```python
# –†—è–¥–æ–∫ ~118
await asyncio.sleep(60)  # <-- –ó–º—ñ–Ω—ñ—Ç—å –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
```

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:**
- 30 —Å–µ–∫ - –¥–ª—è –¥—É–∂–µ –∞–∫—Ç–∏–≤–Ω–∏—Ö –º—ñ—Å—Ç
- 60 —Å–µ–∫ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- 90 —Å–µ–∫ - –¥–ª—è –º–µ–Ω—à –∞–∫—Ç–∏–≤–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–Ü –ü–†–ò–ú–Ü–¢–ö–ò

### 1. –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤
–ú–∞–∫—Å–∏–º—É–º **5 –≤–æ–¥—ñ—ó–≤** –æ—Ç—Ä–∏–º—É—é—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

–î–ª—è –∑–º—ñ–Ω–∏ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `priority_order_manager.py`:
```python
# –†—è–¥–æ–∫ ~56
top_drivers = priority_drivers[:5]  # <-- –ó–º—ñ–Ω—ñ—Ç—å —á–∏—Å–ª–æ
```

### 2. –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤
–í–æ–¥—ñ—ó —Å–æ—Ä—Ç—É—é—Ç—å—Å—è –∑–∞ –ø–æ–ª–µ–º `priority` (DESC).

–Ø–∫—â–æ —É –≤—Å—ñ—Ö `priority = 1`, —Ç–æ –≤—Å—ñ —Ä—ñ–≤–Ω–æ–∑–Ω–∞—á–Ω—ñ.

–î–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—ñ–≤ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è:
- `priority = 3` - VIP –≤–æ–¥—ñ–π
- `priority = 2` - –ü—Ä–µ–º—ñ—É–º
- `priority = 1` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å—É
–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –æ–Ω–ª–∞–π–Ω –≤–æ–¥—ñ—è–º –∑ `priority > 0`.

### 4. –ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –∑ –≥—Ä—É–ø–æ—é
–Ø–∫—â–æ –≤—Å—ñ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó –≤—ñ–¥–º–æ–≤–ª—è—é—Ç—å—Å—è - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –π–¥–µ –≤ –≥—Ä—É–ø—É.
–Ø–∫—â–æ –≤ –≥—Ä—É–ø—ñ –≤–æ–¥—ñ–π –ø—Ä–∏–π–º–µ —à–≤–∏–¥—à–µ - –≤—ñ–Ω –æ—Ç—Ä–∏–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

---

## üéì –ü–†–ò–ö–õ–ê–î–ò –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø

### –ü—Ä–∏–∫–ª–∞–¥ 1: –°–∏—Å—Ç–µ–º–∞ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥

```
–©–æ–º—ñ—Å—è—Ü—è —Ç–æ–ø-3 –≤–æ–¥—ñ—ó –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º –æ—Ç—Ä–∏–º—É—é—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –º—ñ—Å—è—Ü—å.

–ü–µ—Ä–µ–≤–∞–≥–∏:
- –ú–æ—Ç–∏–≤–∞—Ü—ñ—è –¥–ª—è –≤–æ–¥—ñ—ó–≤ –ø—ñ–¥–≤–∏—â—É–≤–∞—Ç–∏ —Ä–µ–π—Ç–∏–Ω–≥
- –ö—Ä–∞—â—ñ –≤–æ–¥—ñ—ó –æ—Ç—Ä–∏–º—É—é—Ç—å –±—ñ–ª—å—à–µ –∑–∞–º–æ–≤–ª–µ–Ω—å
- –ö–ª—ñ—î–Ω—Ç–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å –∫—Ä–∞—â–∏–π —Å–µ—Ä–≤—ñ—Å
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ù—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏

```
–í–æ–¥—ñ—ó —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –≤–Ω–æ—á—ñ –æ—Ç—Ä–∏–º—É—é—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç.

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
- –ê–¥–º—ñ–Ω –≤—Ä—É—á–Ω—É –≤–º–∏–∫–∞—î –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –Ω—ñ—á–Ω–∏–º –≤–æ–¥—ñ—è–º
- –í—Ä–∞–Ω—Ü—ñ –≤–∏–º–∏–∫–∞—î
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –ù–æ–≤—ñ —Ä–∞–π–æ–Ω–∏

```
–ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –Ω–æ–≤–æ–≥–æ —Ä–∞–π–æ–Ω—É –ø–µ—Ä—à–∏–º 5 –≤–æ–¥—ñ—è–º –¥–∞—î—Ç—å—Å—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
–Ω–∞ –ø–µ—Ä—à–∏–π —Ç–∏–∂–¥–µ–Ω—å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.
```

---

## üìö –¢–ï–•–ù–Ü–ß–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–Ü–Ø

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
[–ö–ª—ñ—î–Ω—Ç —Å—Ç–≤–æ—Ä—é—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è]
        ‚Üì
[order.py] ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—è—î app_settings.priority_mode
        ‚Üì
[–Ñ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –≤–æ–¥—ñ—ó?]
    ‚Üô –¢–∞–∫          ‚Üò –ù—ñ
[PriorityOrderManager]  [–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø—É]
    ‚Üì
[–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –î–ú —Ç–æ–ø-5]
    ‚Üì
[–¢–∞–π–º–µ—Ä 60 —Å–µ–∫]
    ‚Üì
[–ß–µ–∫–∞—î–º–æ —Ä–µ–∞–∫—Ü—ñ—ó]
 ‚Üô    |    ‚Üò
–ü—Ä–∏–π–º–∞—î  –í—ñ–¥—Ö–∏–ª—è—î  –¢–∞–π–º–∞—É—Ç
   ‚Üì       ‚Üì         ‚Üì
[–°–∫–∞—Å—É–≤–∞—Ç–∏ —Ç–∞–π–º–µ—Ä] [–í –≥—Ä—É–ø—É]
```

### –°–ª–æ–≤–Ω–∏–∫ —Ç–∞–π–º–µ—Ä—ñ–≤

```python
_priority_timers: dict[int, asyncio.Task] = {}
```

–ö–ª—é—á: `order_id`  
–ó–Ω–∞—á–µ–Ω–Ω—è: `asyncio.Task` –∑ —Ç–∞–π–º–µ—Ä–æ–º

**–í–∞–∂–ª–∏–≤–æ:** –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è –∞–±–æ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è.

---

## üêõ –í–Ü–î–û–ú–Ü –û–ë–ú–ï–ñ–ï–ù–ù–Ø

1. **–ú–∞–∫—Å–∏–º—É–º 5 –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –≤–æ–¥—ñ—ó–≤** - –±—ñ–ª—å—à–µ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –∑–∞—Ç—Ä–∏–º–∫–∏
2. **–¢–∞–π–º–µ—Ä –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–π** - –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç—ñ –±–æ—Ç–∞ —Ç–∞–π–º–µ—Ä–∏ —Å–∫–∏–¥–∞—é—Ç—å—Å—è
3. **–¢—ñ–ª—å–∫–∏ –æ–Ω–ª–∞–π–Ω –≤–æ–¥—ñ—ó** - –æ—Ñ–ª–∞–π–Ω –≤–æ–¥—ñ—ó –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è

---

## üîÑ –û–ù–û–í–õ–ï–ù–ù–Ø

### –í–µ—Ä—Å—ñ—è 1.0 (2025-10-23)
- ‚úÖ –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- ‚úÖ –¢–∞–π–º–µ—Ä 60 —Å–µ–∫—É–Ω–¥
- ‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø—É –ø—Ä–∏ –≤—ñ–¥–º–æ–≤—ñ/—Ç–∞–π–º–∞—É—Ç—ñ
- ‚úÖ –¢—É–º–±–ª–µ—Ä–∏ –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ–π

---

## üìû –ü–Ü–î–¢–†–ò–ú–ö–ê

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —É–≤—ñ–º–∫–Ω–µ–Ω–æ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –≤–æ–¥—ñ—ó –æ–Ω–ª–∞–π–Ω —Ç–∞ –º–∞—é—Ç—å `priority = 1`

---

**–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ:** AI Assistant  
**–î–∞—Ç–∞:** 2025-10-23  
**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** 1.0
