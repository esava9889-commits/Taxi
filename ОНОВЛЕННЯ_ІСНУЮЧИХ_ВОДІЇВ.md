# üîß –û–ù–û–í–õ–ï–ù–ù–Ø –ú–Ü–°–¢–ê –î–õ–Ø –Ü–°–ù–£–Æ–ß–ò–• –í–û–î–Ü–á–í

**–î–∞—Ç–∞:** 2025-10-19  
**–í–∞–∂–ª–∏–≤—ñ—Å—Ç—å:** ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –≤–æ–¥—ñ—ó–≤

---

## ‚ùó –í–ê–ñ–õ–ò–í–û

–Ø–∫—â–æ –≤–æ–¥—ñ—ó –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ **–î–û** —Ü—å–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è, —ó—Ö –º—ñ—Å—Ç–æ –≤ –ë–î –º–æ–∂–µ –±—É—Ç–∏ `NULL` –∞–±–æ –ø–æ—Ä–æ–∂–Ω—ñ–º.

**–ù–æ–≤—ñ –≤–æ–¥—ñ—ó** –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏—Å—å –∑ –º—ñ—Å—Ç–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ ‚úÖ

**–°—Ç–∞—Ä—ñ –≤–æ–¥—ñ—ó** –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ‚ö†Ô∏è

---

## üéØ –†–Ü–®–ï–ù–ù–Ø

### –í–∞—Ä—ñ–∞–Ω—Ç 1: SQL –∑–∞–ø–∏—Ç –Ω–∞ Render (–®–í–ò–î–ö–û)

#### –ö—Ä–æ–∫ 1: –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –¥–æ –ë–î –Ω–∞ Render

```bash
# –í —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ Render –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–æ
psql $DATABASE_URL
```

#### –ö—Ä–æ–∫ 2: –í–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–ø–∏—Ç

```sql
-- –û–Ω–æ–≤–∏—Ç–∏ –º—ñ—Å—Ç–æ –¥–ª—è –≤—Å—ñ—Ö –≤–æ–¥—ñ—ó–≤ –∑ users —Ç–∞–±–ª–∏—Ü—ñ
UPDATE drivers 
SET city = (
    SELECT city 
    FROM users 
    WHERE users.tg_user_id = drivers.tg_user_id
)
WHERE city IS NULL OR city = '';
```

#### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```sql
-- –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ—Ö –≤–æ–¥—ñ—ó–≤ –∑ –º—ñ—Å—Ç–æ–º
SELECT id, full_name, city FROM drivers;
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
 id |  full_name   |  city  
----+--------------+--------
  1 | –Ü–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤  | –ö–∏—ó–≤
  2 | –ü–µ—Ç—Ä–æ –Ü–≤–∞–Ω–æ–≤ | –õ—å–≤—ñ–≤
```

---

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Render Dashboard (–ì–†–ê–§–Ü–ß–ù–û)

#### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏—Ç–∏ Render Dashboard
1. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ https://dashboard.render.com
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à PostgreSQL —Å–µ—Ä–≤—ñ—Å
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Shell"

#### –ö—Ä–æ–∫ 2: –í–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É
```bash
psql $DATABASE_URL -c "UPDATE drivers SET city = (SELECT city FROM users WHERE users.tg_user_id = drivers.tg_user_id) WHERE city IS NULL OR city = '';"
```

#### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
```bash
psql $DATABASE_URL -c "SELECT id, full_name, city FROM drivers;"
```

---

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –õ–æ–∫–∞–ª—å–Ω–æ (—è–∫—â–æ —î –¥–æ—Å—Ç—É–ø –¥–æ –ë–î)

#### PostgreSQL:
```bash
export DATABASE_URL="postgresql://user:pass@host:port/dbname"
psql $DATABASE_URL -c "UPDATE drivers SET city = (SELECT city FROM users WHERE users.tg_user_id = drivers.tg_user_id) WHERE city IS NULL OR city = '';"
```

#### SQLite:
```bash
sqlite3 data/taxi.sqlite3 "UPDATE drivers SET city = (SELECT city FROM users WHERE users.tg_user_id = drivers.tg_user_id) WHERE city IS NULL OR city = '';"
```

---

## üìä –©–û –†–û–ë–ò–¢–¨ –ó–ê–ü–ò–¢

### –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π —Ä–æ–∑–±—ñ—Ä:

```sql
UPDATE drivers 
SET city = (
    -- –ü—ñ–¥–∑–∞–ø–∏—Ç: –∑–Ω–∞–π—Ç–∏ –º—ñ—Å—Ç–æ –≤ users
    SELECT city 
    FROM users 
    WHERE users.tg_user_id = drivers.tg_user_id
)
WHERE city IS NULL OR city = '';
```

**–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–æ–¥—ñ—è:**
1. –ó–Ω–∞–π—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º –∂–µ `tg_user_id`
2. –í–∑—è—Ç–∏ `city` –∑ users
3. –ó–∞–ø–∏—Å–∞—Ç–∏ –≤ `drivers.city`

**–ü—Ä–∏–∫–ª–∞–¥:**
```
drivers (–î–û):
| id | tg_user_id | full_name  | city |
|----|------------|------------|------|
| 1  | 123456789  | –Ü–≤–∞–Ω       | NULL | ‚Üê –ü—Ä–æ–±–ª–µ–º–∞

users:
| tg_user_id | city  |
|------------|-------|
| 123456789  | –ö–∏—ó–≤  | ‚Üê –Ñ –º—ñ—Å—Ç–æ

drivers (–ü–Ü–°–õ–Ø):
| id | tg_user_id | full_name  | city |
|----|------------|------------|------|
| 1  | 123456789  | –Ü–≤–∞–Ω       | –ö–∏—ó–≤ | ‚Üê –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ! ‚úÖ
```

---

## üß™ –ü–ï–†–ï–í–Ü–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–£

### SQL –∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

```sql
-- –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ—Ö –≤–æ–¥—ñ—ó–≤ –∑ –º—ñ—Å—Ç–æ–º —Ç–∞ –±–µ–∑
SELECT 
    id,
    full_name,
    CASE 
        WHEN city IS NULL OR city = '' THEN '‚ùå –ù–ï –í–ö–ê–ó–ê–ù–û'
        ELSE '‚úÖ ' || city
    END as city_status
FROM drivers;
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
 id |  full_name   | city_status  
----+--------------+--------------
  1 | –Ü–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤  | ‚úÖ –ö–∏—ó–≤
  2 | –ü–µ—Ç—Ä–æ –Ü–≤–∞–Ω–æ–≤ | ‚úÖ –õ—å–≤—ñ–≤
```

---

## ‚è±Ô∏è –ö–û–õ–ò –í–ò–ö–û–ù–£–í–ê–¢–ò

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: **–ó–ê–†–ê–ó** (–æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é)

**–ß–æ–º—É:**
1. –í–∏–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –≤–æ–¥—ñ—ó–≤
2. –ó–∞–π–º–∞—î ~1 —Å–µ–∫—É–Ω–¥—É
3. –ë–µ–∑–ø–µ—á–Ω–æ (—Ç—ñ–ª—å–∫–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è city)
4. –ù–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä–æ–±–æ—Ç—É –±–æ—Ç–∞

---

## üîí –ë–ï–ó–ü–ï–ö–ê

### –ó–∞–ø–∏—Ç –±–µ–∑–ø–µ—á–Ω–∏–π —Ç–æ–º—É —â–æ:
1. ‚úÖ –¢—ñ–ª—å–∫–∏ `UPDATE` (–Ω–µ `DELETE`)
2. ‚úÖ –¢—ñ–ª—å–∫–∏ –ø–æ–ª–µ `city`
3. ‚úÖ –¢—ñ–ª—å–∫–∏ —è–∫—â–æ `city IS NULL OR city = ''`
4. ‚úÖ –ë–µ—Ä–µ –¥–∞–Ω—ñ –∑ users (–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –¥–∞–Ω—ñ)
5. ‚úÖ –ù–µ –∑–∞—á—ñ–ø–∞—î —ñ–Ω—à—ñ –ø–æ–ª—è

---

## üìã –ß–ï–ö-–õ–ò–°–¢

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É:

- [ ] –í–∏–∫–æ–Ω–∞–Ω–æ SQL –∑–∞–ø–∏—Ç –Ω–∞ Render
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (`SELECT id, full_name, city FROM drivers`)
- [ ] –í—Å—ñ –≤–æ–¥—ñ—ó –º–∞—é—Ç—å –º—ñ—Å—Ç–æ
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç –Ω–∞ Render (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å –≤–æ–¥—ñ—è - –º—ñ—Å—Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å - –º—ñ—Å—Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è

---

## üöÄ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢

**–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±:**

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Render Dashboard
2. PostgreSQL ‚Üí Shell
3. –í—Å—Ç–∞–≤—Ç–µ —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
   ```sql
   UPDATE drivers SET city = (SELECT city FROM users WHERE users.tg_user_id = drivers.tg_user_id) WHERE city IS NULL OR city = '';
   ```
4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** ~1 —Å–µ–∫—É–Ω–¥–∞

---

## üìû –î–û–ü–û–ú–û–ì–ê

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î:**
   ```sql
   SELECT COUNT(*) FROM drivers;
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —î users:**
   ```sql
   SELECT tg_user_id, city FROM users LIMIT 5;
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–æ–¥—ñ—ó–≤ –±–µ–∑ –º—ñ—Å—Ç–∞:**
   ```sql
   SELECT id, full_name, city FROM drivers WHERE city IS NULL OR city = '';
   ```

---

**–í–∏–∫–æ–Ω–∞–π—Ç–µ SQL –∑–∞–ø–∏—Ç —Ç–∞ –≤—Å–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ!** üéâ
